<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        class Card{
            #rank;
            #suit;
            #index;
        
            get rank(){
                return this.#rank;
            }
        
            set rank(rank){
                this.#rank=rank;
            }
        
            get suit(){
                return this.#suit;
            }
        
            set suit(suit){
                this.#suit=suit;
            }
        
            get index(){
                return this.#index;
            }
        
            set index(index){
                this.#index=index;
            }
        
            constructor(index){
                this.rank=((index-1)%13)+1;
                //Aのカードはランク14として扱う
                if(this.rank===1){
                    this.rank=14;
                }
                this.suit=Math.floor((index-1)/13)+1;
                this.index=index;
            }
        }
        class Util{
          /*イベントハンドラを追加する*/
          static addEventListener=(selector,event,handler)=>{
              document.querySelectorAll(selector).forEach((e)=>e.addEventListener(event,handler));
          }
      
          //数値を合計する
          static sum = (...numbers) =>{
              let sum = 0;
              numbers.forEach((e) => {
                  sum += e;
              });
              return sum;
          };
      }
      
      

        class Strength{
            order=0;
            rank=0;
    
              //(hand)の引数にはcombination関数で作った組み合わせ(7枚内5枚)一つ一つを入れる、元々降順にしたやつ
              //この関数はarray(rankを基に降順にした全ての７枚中５枚の組み合わせの配列).forEach((e)=>{const a = []; a.push(hand_strength(e));});としてつかう
              //その次にmax(a)を行う
            static hand_strength(hand){
                //ロイヤルストレートフラッシュの判定
                if (
                  hand[0][1] === 14 && 
                  hand[1][1] === 13 && 
                  hand[2][1] === 12 &&
                  hand[3][1] === 11 &&
                  hand[4][1] === 10 &&
                  hand[0][0] === hand[1][0] &&
                  hand[0][0] === hand[2][0] &&
                  hand[0][0] === hand[3][0] &&
                  hand[0][0] === hand[4][0] 
                    ){
                      this.order = 9;
                      this.rank = Util.sum(900,hand[0][1],hand[1][1],hand[2][1],hand[3][1],hand[4][1]);
                      return this.rank;
                    }
                //ストレートフラッシュの判定
                else if (
                  hand[0][1] === hand[1][1]+1 &&
                  hand[1][1] === hand[2][1]+1 &&
                  hand[2][1] === hand[3][1]+1 &&
                  hand[3][1] === hand[4][1]+1 &&
                  hand[0][0] === hand[1][0] &&
                  hand[0][0] === hand[2][0] &&
                  hand[0][0] === hand[3][0] &&
                  hand[0][0] === hand[4][0] 
                    ){
                      this.order = 8;
                      this.rank = Util.sum(800,hand[0][1],hand[1][1],hand[2][1],hand[3][1],hand[4][1]);
                      return this.rank;
                    }
                //フォーカードの判定
                else if (
                  (hand[0][1] === hand[1][1] &&
                  hand[0][1] === hand[2][1] &&
                  hand[0][1] === hand[3][1]) ||
                  (hand[1][1] === hand[2][1] &&
                    hand[1][1] === hand[3][1] &&
                    hand[1][1] === hand[4][1]) 
                ){
                  this.order = 7;
                  this.rank = Util.sum(700,hand[0][1],hand[1][1],hand[2][1],hand[3][1],hand[4][1]);
                  return this.rank;
                }
              //フルハウスの判定
              else if (
                (hand[0][1] === hand[1][1] &&
                 hand[2][1] === hand[3][1] &&
                 hand[2][1] === hand[4][1])||
                (hand[0][1] === hand[1][1] &&
                 hand[0][1] === hand[2][1] &&
                 hand[3][1] === hand[4][1])
              ){
                this.order = 6;
                this.rank = Util.sum(600,hand[0][1],hand[1][1],hand[2][1],hand[3][1],hand[4][1]);
                return this.rank;
              }
              //フラッシュの判定
              else if (
                hand[0][0] === hand[1][0] &&
                hand[0][0] === hand[2][0] &&
                hand[0][0] === hand[3][0] &&
                hand[0][0] === hand[4][0]   
              ){
                this.order = 5;
                this.rank = Util.sum(500,hand[0][1],hand[1][1],hand[2][1],hand[3][1],hand[4][1]);
                return this.rank;
              }
              //ストレートの判定
              else if (
                  hand[0][1] === hand[1][1]+1 &&
                  hand[1][1] === hand[2][1]+1 &&
                  hand[2][1] === hand[3][1]+1 &&
                  hand[3][1] === hand[4][1]+1 
              ){
                this.order = 4;
                this.rank = Util.sum(400,hand[0][1],hand[1][1],hand[2][1],hand[3][1],hand[4][1]);
                return this.rank;
              }
              //スリーカードの判定
              else if (
                (hand[0][1] === hand[1][1] &&
                 hand[0][1] === hand[2][1]) ||
                (hand[1][1] === hand[2][1] &&
                 hand[1][1] === hand[3][1]) ||
                (hand[2][1] === hand[3][1] &&
                hand[2][1] === hand[4][1]) 
              ){
                this.order = 3;
                this.rank = Util.sum(300,hand[0][1],hand[1][1],hand[2][1],hand[3][1],hand[4][1]);
                return this.rank;
              }
              //ツーペアの判定
              else if (
                (hand[0][1] === hand[1][1] &&
                 hand[2][1] === hand[3][1])||
                 (hand[1][1] === hand[2][1] &&
                  hand[3][1] === hand[4][1])
              ){
                this.order = 2;
                this.rank = Util.sum(200,hand[0][1],hand[1][1],hand[2][1],hand[3][1],hand[4][1]);
                return this.rank;
              }
              //ワンペアの判定
              else if (
                (hand[0][1] === hand[1][1])||
                (hand[1][1] === hand[2][1])||
                (hand[2][1] === hand[3][1])||
                (hand[3][1] === hand[4][1])
              ){
                this.order = 1;
                this.rank = Util.sum(100,hand[0][1],hand[1][1],hand[2][1],hand[3][1],hand[4][1]);
                return this.rank;
              }
              //役なし
              else{
                this.order =0;
                this.rank = Util.sum(hand[0][1],hand[1][1],hand[2][1],hand[3][1],hand[4][1]);
                return this.rank;
              }
              };
            
          
          
          static compareNum(a,b) {
                  return  b[1] - a[1];
                };
              
          
          ////７枚から５枚の組み合わせを全て出す
          static combination (num, k) {
              let ans = [];
              if (num.length < k) {
                return [];
              }
              if (k === 1) {
                for (let i = 0; i < num.length; i++) {
                  ans[i] = [num[i]];
                }
              } else {
                for (let i = 0; i < num.length - k + 1; i++) {
                  let row = this.combination(num.slice(i + 1), k - 1);
                  for (let j = 0; j < row.length; j++) {
                    ans.push([num[i]].concat(row[j]));
                  }
                }
              }
              return ans;
            };
        
            static change(cards){
              const c = [];
              cards.forEach((_)=>{
                const s =[];
                  s.push(_.suit);
                  s.push(_.rank);
                  c.push(s);
                  }
                );
               return c;}

            //7枚の内最も強い役の組み合わせ(5枚)を抽出する関数
             static hand_best(cards){
                 let c =  this.change(cards);
                 let b =  this.combination(c,5);
                 b.forEach((e)=>{
                  e.sort(this.compareNum);
                 })
                 let a =[];
                 b.forEach((e)=>{
                  a.push(this.hand_strength(e));
                 })
                 let max = Math.max(...a);
                 let result = a.indexOf(max);
                 return b[result];   
              }
          }

          class Pair {
            /**
             * プロパティ
             */
            static #rank = 0; // 役を構成するランク
          
            /**
             * ロイヤルストレートフラッシュの成否を判定する
             */
            
            static isRoyalStraightFlush = (hand) => {
              // 役の判定フラグ（true:成立,false:不成立）
              let isPair = false;
              if (
                  hand[0][1] === 14 && 
                  hand[1][1] === 13 && 
                  hand[2][1] === 12 &&
                  hand[3][1] === 11 &&
                  hand[4][1] === 10 &&
                  hand[0][0] === hand[1][0] &&
                  hand[0][0] === hand[2][0] &&
                  hand[0][0] === hand[3][0] &&
                  hand[0][0] === hand[4][0] 
              ) {
                isPair = true;
                // 5枚のランクを合計
                this.#rank = Util.sum(hand[0][1],hand[1][1],hand[2][1],hand[3][1],hand[4][1]);
              }
              return isPair;
            };
          
            /**
             * ストレートフラッシュの成否を判定する
             */
            static isStraightFlush = (hand) => {
              // 役の判定フラグ（true:成立,false:不成立）
              let isPair = false;
              // 5枚とも同じ絵柄でランクが連続
              if (
                  hand[0][1] === hand[1][1]+1 &&
                  hand[1][1] === hand[2][1]+1 &&
                  hand[2][1] === hand[3][1]+1 &&
                  hand[3][1] === hand[4][1]+1 &&
                  hand[0][0] === hand[1][0] &&
                  hand[0][0] === hand[2][0] &&
                  hand[0][0] === hand[3][0] &&
                  hand[0][0] === hand[4][0] 
              ) {
                isPair = true;
                // 5枚のランクを合計
                this.#rank = Util.sum(hand[0][1],hand[1][1],hand[2][1],hand[3][1],hand[4][1]);
              }
              return isPair;
            };
          
            /**
             * フォーカードの成否を判定する
             */
            static isFourCard = (hand) => {
              // 役の判定フラグ（true:成立,false:不成立）
              let isPair = false;
              // 1枚目から4枚目までのランクが同じ
              if (
                  hand[0][1] === hand[1][1] &&
                      hand[0][1] === hand[2][1] &&
                      hand[0][1] === hand[3][1]   
              ) {
                isPair = true;
                // 1枚目から4枚目までのランクを合計
                this.#rank = Util.sum(hand[0][1],hand[1][1],hand[2][1],hand[3][1]);
              }
              // 2枚目から5枚目までのランクが同じ
              else if (
                // 1,2枚目のランクが異なる
                hand[1][1] === hand[2][1] &&
                  hand[1][1] === hand[3][1] &&
                  hand[1][1] === hand[4][1]
              ) {
                isPair = true;
                // 2枚目から5枚目までのランクを合計
                this.#rank = Util.sum(hand[1][1],hand[2][1],hand[3][1],hand[4][1]);
              }
              return isPair;
            };
          
            /**
             * フルハウスの成否を判定する
             */
            static isFullHouse = (hand) => {
              // 役の判定フラグ（true:成立,false:不成立）
              let isPair = false;
              // 1,2枚目と3～5枚目のランクが同じ
              if (
                  hand[0][1] === hand[1][1] &&
                  hand[2][1] === hand[3][1] &&
                  hand[2][1] === hand[4][1]
              ) {
                isPair = true;
                // 5枚のランクを合計
                this.#rank = Util.sum(hand[0][1],hand[1][1],hand[2][1],hand[3][1],hand[4][1]);
              }
              // 1～3枚目と4,5枚目のランクが同じ
              else if (
                  hand[0][1] === hand[1][1] &&
                  hand[0][1] === hand[2][1] &&
                  hand[3][1] === hand[4][1]
              ) {
                isPair = true;
                // 5枚のランクを合計
                this.#rank = Util.sum(hand[0][1],hand[1][1],hand[2][1],hand[3][1],hand[4][1]);
              }
              return isPair;
            };
          
            /**
             * フラッシュの成否を判定する
             */
            static isFlush = (hand) => {
              // 役の判定フラグ（true:成立,false:不成立）
              let isPair = false;
              // 5枚とも同じ絵柄
              if (
                  hand[0][0] === hand[1][0] &&
                  hand[0][0] === hand[2][0] &&
                  hand[0][0] === hand[3][0] &&
                  hand[0][0] === hand[4][0]   
              ) {
                isPair = true;
                // 5枚のランクを合計
                this.#rank = Util.sum(hand[0][1],hand[1][1],hand[2][1],hand[3][1],hand[4][1]);
              }
              return isPair;
            };
          
            /**
             * ストレートの成否を判定する
             */
            static isStraight = (hand) => {
              // 役の判定フラグ（true:成立,false:不成立）
              let isPair = false;
              // 5枚のランクが連続
              if (
                  hand[0][1] === hand[1][1]+1 &&
                  hand[1][1] === hand[2][1]+1 &&
                  hand[2][1] === hand[3][1]+1 &&
                  hand[3][1] === hand[4][1]+1 
              ) {
                isPair = true;
                // 5枚のランクを合計
                this.#rank = Util.sum(hand[0][1],hand[1][1],hand[2][1],hand[3][1],hand[4][1]);
              }
              return isPair;
            };
          
            /**
             * スリーカードの成否を判定する
             */
            static isThreeCard = (hand) => {
              // 役の判定フラグ（true:成立,false:不成立）
              let isPair = false;
              // 1～3枚目が同じランク
              if (
                  hand[0][1] === hand[1][1] &&
                  hand[0][1] === hand[2][1]
              ) {
                isPair = true;
                // 1～3枚目のランクを合計
                this.#rank = Util.sum(hand[0][1],hand[1][1],hand[2][1]);
              }
              // 2～4枚目が同じランク
              else if (
                  hand[1][1] === hand[2][1] &&
                  hand[1][1] === hand[3][1]
              ) {
                isPair = true;
                // 2～4枚目のランクを合計
                this.#rank = Util.sum(hand[1][1],hand[2][1],hand[3][1]);
              }
              // 3～5枚目が同じランク
              else if (
                  hand[2][1] === hand[3][1] &&
                  hand[2][1] === hand[4][1]
              ) {
                isPair = true;
                // 3～5枚目のランクを合計
                this.#rank = Util.sum(hand[2][1],hand[3][1],hand[4][1]);
              }
              return isPair;
            };
          
            /**
             * ツーペアの成否を判定する
             */
            static isTwoPair = (hand) => {
              // 役の判定フラグ（true:成立,false:不成立）
              let isPair = false;
              // 1,2枚目と3,4枚目が同じランク
              if (
                  hand[0][1] === hand[1][1] &&
                  hand[2][1] === hand[3][1]
              ) {
                isPair = true;
                // 1,2枚目と3,4枚目のランクを合計
                this.#rank = Util.sum(hand[0][1],hand[1][1],hand[2][1],hand[3][1]);
              }
              // 2,3枚目と4,5枚目が同じランク
              else if (
                  hand[1][1] === hand[2][1] &&
                  hand[3][1] === hand[4][1]
              ) {
                isPair = true;
                // 2,3枚目と4,5枚目のランクを合計
                this.#rank = Util.sum(hand[1][1],hand[2][1],hand[3][1],hand[4][1]);
              } 
              return isPair;
            };
          
            /**
             * ワンペアの成否を判定する
             */
            static isOnePair = (hand) => {
              // 役の判定フラグ（true:成立,false:不成立）
              let isPair = false;
              // 1,2枚目が同じランク
              if (hand[0][1] === hand[1][1]) {
                isPair = true;
                // 1,2枚目のランクを合計
                this.#rank = Util.sum(hand[0][1],hand[1][1]);
              }
              // 2,3枚目が同じランク
              else if (hand[1][1] === hand[2][1]) {
                isPair = true;
                // 2,3枚目のランクを合計
                this.#rank = Util.sum(hand[1][1],hand[2][1]);
              }
              // 3,4枚目が同じランク
              else if (hand[2][1] === hand[3][1]) {
                isPair = true;
                // 3,4枚目のランクを合計
                this.#rank = Util.sum(hand[2][1],hand[3][1]);
              }
              // 4,5枚目が同じランク
              else if (hand[3][1] === hand[4][1]) {
                isPair = true;
                // 4,5枚目のランクを合計
                this.#rank = Util.sum(hand[3][1],hand[4][1]);
              }
              return isPair;
            };
          
            //引数cardsにはStrength.best_hand関数で求めた５枚の組み合わせを入れる
            static judge = (cards) => {
              // 判定結果
              let result = null;
              // ロイヤルストレートフラッシュの判定
              if (this.isRoyalStraightFlush(cards)) {
                result = {
                  strength: 9,
                  rank: this.#rank,
                  hand: "ロイヤルストレートフラッシュ",
                };
              }
              // ストレートフラッシュの判定
              else if (this.isStraightFlush(cards)) {
                result = {
                  strength: 8,
                  rank: this.#rank,
                  hand: "ストレートフラッシュ",
                };
              }
              // フォーカードの判定
              else if (this.isFourCard(cards)) {
                result = {
                  strength: 7,
                  rank: this.#rank,
                  hand: "フォーカード",
                };
              }
              // フルハウスの判定
              else if (this.isFullHouse(cards)) {
                result = {
                  strength: 6,
                  rank: this.#rank,
                  hand: "フルハウス",
                };
              }
              // フラッシュの判定
              else if (this.isFlush(cards)) {
                result = {
                  strength: 5,
                  rank: this.#rank,
                  hand: "フラッシュ",
                };
              }
              // ストレートの判定
              else if (this.isStraight(cards)) {
                result = {
                  strength: 4,
                  rank: this.#rank,
                  hand: "ストレート",
                };
              }
              // スリーカードの判定
              else if (this.isThreeCard(cards)) {
                result = {
                  strength: 3,
                  rank: this.#rank,
                  hand: "スリーカード",
                };
              }
              // ツーペアの判定
              else if (this.isTwoPair(cards)) {
                result = {
                  strength: 2,
                  rank: this.#rank,
                  hand: "ツーペア",
                };
              }
              // ワンペアの判定
              else if (this.isOnePair(cards)) {
                result = {
                  strength: 1,
                  rank: this.#rank,
                  hand: "ワンペア",
                };
              }
              // 役が成立していない場合
              else {
                result = {
                  strength: 0,
                  rank: 0,
                  hand: "役なし",
                };
              }
              return result;
            };
          }
          



        var cards = [];
        [...Array(52)].map((_,index)=>{
            cards.push(new Card(index+1));
        });

        //document.write((cards));
        

        

        [...Array(100)].forEach(() => {
            // 山札から2枚のカードをランダムに選んで交換する
            const j = Math.floor(Math.random() * cards.length);
            const k = Math.floor(Math.random() * cards.length);
            [cards[j], cards[k]] = [cards[k], cards[j]];
          });

          //document.write(cards[1].suit);
          //const as = Strength.change(cards);
          
          


          var hand = [];


         [...Array(7)].forEach(() => {
            // 山札からカードを1枚取り出してプレイヤーに配る、合計７枚配る
             hand.push(cards.pop());
          });

          let a = Strength.hand_best(hand);
         document.write(JSON.stringify(a));

         let result = Pair.judge(a);
         document.write(result.hand)

        
    </script>
</body>
</html>